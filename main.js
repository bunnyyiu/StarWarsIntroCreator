function toggleLoading(){isLoading?($("#loader").hide(),$("#form-starwars").show()):($("#loader").show(),$("#form-starwars").hide()),isLoading=!isLoading}function validateEmail(t){var a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(t)}StarWarsOpening=function(){function t(t){this.el=$(t.el),this.audio=this.el.find("audio").get(0),this.audioDefer=$.Deferred();var a=this;this.audio.oncanplaythrough=function(){a.audioDefer.resolve()},this.start=this.el.find(".start"),this.animation=this.el.find(".animation"),this.reset()}return t.prototype.reset=function(){this.start.show(),$(".pageHide").show(),this.cloned=this.animation.clone(!0),this.animation.remove(),this.animation=this.cloned,$(window).trigger("resize")},t.prototype.resetAudio=function(){this.audio.pause(),this.audio.currentTime=0},t.prototype.play=function(){this.start.hide(),$(".pageHide").hide(),$("#loader").hide(),$("body").removeClass("running"),$("body").addClass("running"),$("body").scrollTop(0),this.audio.play(),this.el.append(this.animation);var t=$(".titles > div",this.animation)[0];if(t.offsetHeight>1977){for(var a,o=t.offsetHeight-1977,e=.04041570438799076,i=20-o*e,n=document.styleSheets,r=0;r<n.length;++r)for(var s=0;s<n[r].cssRules.length;++s){var d=n[r].cssRules[s];"titles"==d.name&&d.type==CSSRule.KEYFRAMES_RULE&&(a=d)}a&&a.appendRule("100% { top: "+i+"% }")}},t}();var StarWars=new StarWarsOpening({el:".starwars"});swal.setDefaults({customClass:"star-wars-alert"});var OpeningKey=null,audio=document.getElementsByTagName("audio")[0],audioIsLoaded=!1,loadData=function(){audioIsLoaded||(audio.load(),audioIsLoaded=!0)};document.body.addEventListener("touchstart",loadData),window.addEventListener("keydown",function(t){var a=document.activeElement.type||"";a.indexOf("text")<0&&[32,37,38,39,40].indexOf(t.keyCode)>-1&&t.preventDefault()},!1);var notPlayed=!0,isLoading=!1,showFooter=!0;toggleLoading();var playIntro=function(t){$("#playBut").remove(),$("body").removeClass("running"),StarWars.opening=t,$("#videoButton").show();var a=t.intro.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;"),a=a.replace(/\n/g,"<br>"),StarWars.animation.find("#intro").html(a),StarWars.animation.find("#episode").text(t.episode),StarWars.animation.find("#title").text(t.title);var o=t.text.split("\n"),e=StarWars.animation.find("#text");e.text("");for(var i in o)e.append($("<p>").text(o[i]));$("#logosvg",StarWars.animation).css("width",$(window).width()+"px"),$("#logoimg",StarWars.animation).css("width",$(window).width()+"px");var n=t.logo?t.logo:"star\nwars",r=n.split("\n"),s=r[0],d=r[1]||"",l=r[2]||"";if("star\nwars"!=n.toLowerCase()){var u=$("#logosvg text",StarWars.animation);u[0].textContent=s,u[1].textContent=d,u[2].textContent=l;var h=Math.max(s.length,d.length,l.length),g="0 0 "+200*h+" 750";$("#logosvg",StarWars.animation).each(function(){$(this)[0].setAttribute("viewBox",g)}),$("#logosvg",StarWars.animation).show(),$("#logoimg",StarWars.animation).hide()}else $("#logosvg",StarWars.animation).hide(),$("#logoimg",StarWars.animation).show();var p=function(){$.when(StarWars.audioDefer).then(function(){var t=StarWars.audio.buffered.end(StarWars.audio.buffered.length-1);0!=t||audioIsLoaded?(toggleLoading(),notPlayed=!1,StarWars.play()):($("#loader").hide(),playbutton=$('<div class="verticalWrapper"><div class="playAudio"><button id="playBut" class="playButton" style="font-size: 80px">Play</button></div></div>'),$("body").append(playbutton),$("#playBut",playbutton).click(function(){$("#loader").show(),playbutton.remove()}),StarWars.audio.oncanplaythrough=function(){toggleLoading(),notPlayed=!1,StarWars.play()})})};document.hasFocus()?p():$(window).focus(function(){notPlayed&&p()})},prepareAndPlayIntro=function(){var t={intro:$("#f-intro").val(),logo:$("#f-logo").val(),episode:$("#f-episode").val(),title:$("#f-title").val(),text:$("#f-text").val()},a=t.logo.split("\n");return a.length>3?void sweetAlert("Oops...","Logo can't have more than 3 lines.","warning"):void playIntro(t)};$(document).ready(function(){prepareAndPlayIntro()});var calcTime=function(t){var a=50*(t+1),o=Math.floor(a/60),e=Math.floor(o/24),i="";return e>0&&(i+=e+" days"),3>e&&(o%=24,a%=60,o>0&&(i+=" "+o+" hours"),a>0&&(i+=" "+a+" minutes")),i};